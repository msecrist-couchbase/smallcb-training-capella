title: Query Rows
page: page-04
lang: py
code: |
  #!/usr/bin/python3
  
  import sys
  
  from couchbase.cluster import Cluster, ClusterOptions
  from couchbase_core.cluster import PasswordAuthenticator
  
  pa = PasswordAuthenticator('{{.CBUser}}', '{{.CBPswd}}')
  cluster = Cluster('couchbase://{{.Host}}', ClusterOptions(pa))
  bucket = cluster.bucket('travel-sample')
  coll = bucket.default_collection()

  try:
    query = """SELECT name, city, state FROM `travel-sample`
      WHERE type = 'hotel'
      AND city = 'Malibu' LIMIT 5"""
  
    result = cluster.query(query)
  
    for row in result:
      # each row is an instance of the query call
      name = row['name']
      age = row['city']
      print("hotel: ", name + age)
  
  except:
    print("exception:", sys.exc_info()[0])
infoAfter: |
  If we know a document's key value, we can use the collection.get() method
  passing a key. This returns one document. 
  Visit our docs to learn more about <a target="_blank" href="https://docs.couchbase.com/python-sdk/current/howtos/kv-operations.html#retrieving-full-documents">Retrieving Full Documents in Python</a>.
