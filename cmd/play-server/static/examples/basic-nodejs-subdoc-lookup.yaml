title:  Sub-document Lookup
page: page-03
lang: nodejs
code: |
  const couchbase = require('couchbase')
  
  const cluster = new couchbase.Cluster('couchbase://{{.Host}}', {
    username: '{{.CBUser}}', password: '{{.CBPswd}}'
  })
  
  const bucket = cluster.bucket('travel-sample')
  const collection = bucket.defaultCollection()
  
  const getSubDocument = async (key, field) => {
    try {
      var result = await collection.lookupIn(key, [
        couchbase.LookupInSpec.get(field),
      ])
      var fieldValue = result.content[0].value 
  
      console.log('LookupIn Result: ')
      console.log(result)
  
      console.log(`Field Value: `)
      console.log(fieldValue)
    } catch (error) {
      console.error(error)
    }
  }
  
  getSubDocument('airline_10', 'country')
    .then(() => process.exit(0))
infoAfter: |
  Our Sub-document API allows for only retrieving or mutating a portion of 
  a larger document. For operations where you just need to update one field 
  in a document, this keeps you from having to query, change and send back and
  updated document and is more performant getting or setting in one operation. 
  Visit our docs to learn more about <a target="_blank" href="https://docs.couchbase.com/nodejs-sdk/current/howtos/subdocument-operations.html#retrieving">Retrieving Sub-documents in Node</a>.